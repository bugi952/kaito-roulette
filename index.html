<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ğŸ° Yappers ìŠ¬ë¡¯ ë£°ë › (ë¡œì»¬ ì´ë¯¸ì§€ + ë°°í¬)</title>
<style>
  :root{ --accent:#6c5ce7; --bg1:#f5f8ff; --bg2:#eaf3ff }
  html,body{height:100%;margin:0}
  body{
    display:grid;place-items:center;text-align:center;
    font-family:ui-sans-serif,system-ui,Apple SD Gothic Neo,Malgun Gothic,sans-serif;
    background:radial-gradient(1200px 600px at 50% -10%, var(--bg1), var(--bg2)); color:#111;
  }
  main{ width:min(680px,92vw) }
  .slot{ width:220px;height:220px;border-radius:28px;background:#fff;
         display:grid;place-items:center;margin:12px auto 18px;
         box-shadow:0 22px 45px rgba(0,0,0,.12), inset 0 0 0 1px #e5e7eb; overflow:hidden }
  .slot.fast{ animation:bump .15s infinite }
  @keyframes bump{ 0%{transform:translateY(0)} 50%{transform:translateY(2px)} 100%{transform:translateY(0)}}
  .slot.fast img{ filter:blur(1px) saturate(1.1) }
  .logo{ width:88%;height:88%;object-fit:contain; display:block }
  .fallback{ width:100%;height:100%;display:grid;place-items:center;
             font-weight:900;font-size:64px;color:#fff;
             background:linear-gradient(135deg,var(--accent),#4b39c5) }
  .btn{ padding:14px 34px;border:none;border-radius:999px;cursor:pointer;color:#fff;
        font-weight:800;font-size:18px;background:linear-gradient(135deg,var(--accent),#4b39c5);
        box-shadow:0 12px 28px rgba(0,0,0,.16);transition:transform .08s,filter .2s }
  .btn:hover{ filter:brightness(1.05) } .btn:active{ transform:translateY(1px) scale(.98) }
  .btn[disabled]{ opacity:.6; cursor:not-allowed }
  #result{ margin-top:18px; min-height:48px }
  #result .name{ font-size:28px; font-weight:900; margin-bottom:6px }
  #result .msg{ font-size:16px; color:#374151 }
  .small{ color:#6b7280; font-size:12px; margin-top:8px }
  .progress{ margin-top:6px; height:8px; background:#e5e7eb; border-radius:999px; overflow:hidden }
  .bar{ height:100%; width:0%; background:linear-gradient(90deg,#86efac,#22c55e) }
  details{ text-align:left; margin:14px auto 0; max-width:560px; padding:10px 12px; background:#fff; border-radius:12px; box-shadow:0 4px 16px rgba(0,0,0,.06) }
  details[open] summary{ margin-bottom:8px } summary{ cursor:pointer; font-weight:700 } ul{ margin:6px 0 0 18px }
</style>
</head>
<body>
  <main>
    <div class="small" id="status">ë¡œê³  í™•ì¸ ëŒ€ê¸°â€¦</div>
    <div class="progress"><div class="bar" id="bar"></div></div>

    <div id="slot" class="slot"><div class="fallback">?</div></div>
    <button id="startBtn" class="btn" disabled>Spin ğŸ²</button>
    <div id="result"></div>

    <details id="diag">
      <summary>ì§„ë‹¨ ë³´ê¸°</summary>
      <div id="diagBody">ì•„ì§ í™•ì¸ ì „ì…ë‹ˆë‹¤.</div>
    </details>

    <div class="small">ì´ë¯¸ì§€ëŠ” <code>images/</code> í´ë”ì—ì„œ ìë™ìœ¼ë¡œ ì°¾ìŠµë‹ˆë‹¤. (PNG/JPG/JPEG/WebP/SVGâ€¦)</div>
  </main>

<script>
/* === ì„¤ì • (íŒŒì¼ëª…=í™•ì¥ì ì œì™¸) === */
const items = [
  { name:"Anoma", base:"Anoma" }, { name:"Aptos", base:"Aptos" },
  { name:"Beldex", base:"Beldex" }, { name:"Bitdealer", base:"Bitdealer" },
  { name:"Bless", base:"Bless" }, { name:"Cysic", base:"Cysic" },
  { name:"Falcon Finance", base:"Falcon Finance" }, { name:"GOAT Network", base:"GOAT Network" },
  { name:"Hana", base:"Hana" }, { name:"Huma Finance", base:"Huma Finance" },
  { name:"Hyperpie", base:"Hyperpie" }, { name:"Infinex", base:"Infinex" },
  { name:"Lombard", base:"Lombard" }, { name:"Lumiterra", base:"Lumiterra" },
  { name:"Mavryk Network", base:"Mavryk Network" }, { name:"Metawin", base:"Metawin" },
  { name:"Mira", base:"Mira" }, { name:"MultiBank", base:"MultiBank" },
  { name:"Multipli.fi", base:"Multipli.fi" }, { name:"Novastro", base:"Novastro" },
  { name:"NOYA.ai", base:"NOYA.ai" }, { name:"peaq", base:"peaq" },
  { name:"Polygon", base:"Polygon" }, { name:"Puffpaw", base:"Puffpaw" },
  { name:"Pyth", base:"Pyth" }, { name:"Somnia", base:"Somnia" },
  { name:"Surf", base:"Surf" }, { name:"Talus Labs", base:"Talus Labs" },
  { name:"Theoriq", base:"Theoriq" }, { name:"Turtle", base:"Turtle" },
  { name:"UXLINK", base:"UXLINK" }, { name:"Warden", base:"Warden" },
  { name:"XION", base:"XION" },
];

/* === ìš”ì†Œ/ìƒíƒœ === */
const slot   = document.getElementById('slot');
const startBtn = document.getElementById('startBtn');
const result = document.getElementById('result');
const statusEl = document.getElementById('status');
const barEl    = document.getElementById('bar');
const diagBody = document.getElementById('diagBody');

let idx = -1, intervalId = null, stopTimer = null;
const srcCache = new Map(); // base -> ì„±ê³µí•œ ì´ë¯¸ì§€ src (ì—†ìœ¼ë©´ null)

/* === ìœ í‹¸ === */
function initials(name){
  const parts = (name||'?').trim().split(' ').filter(Boolean);
  return parts.slice(0,2).map(w=>w[0]).join('').toUpperCase();
}
function fallbackBlock(name){
  const d=document.createElement('div'); d.className='fallback'; d.textContent=initials(name||'?'); return d;
}
const EXTS = ["png","jpg","jpeg","webp","svg","PNG","JPG","JPEG","WEBP","SVG","gif","GIF","bmp","BMP","ico","ICO","avif","AVIF","jfif","JFIF"];

function tryFindImage(base){
  return new Promise((resolve)=>{
    const baseEnc = encodeURIComponent(base);
    let i = 0;
    const tryNext = () => {
      if (i >= EXTS.length) { resolve(null); return; }
      const src = `images/${baseEnc}.${EXTS[i++]}`;
      const img = new Image();
      img.onload = () => resolve(src);
      img.onerror = tryNext;
      img.src = src;
    };
    tryNext();
  });
}

/* === í”„ë¦¬ë¡œë“œ === */
async function preloadAll(){
  let ok=0, miss=[];
  for (const it of items){
    const found = await tryFindImage(it.base);
    srcCache.set(it.base, found);
    if(found) ok++; else miss.push(it.name);
    statusEl.textContent = `ë¡œê³  í™•ì¸ ${ok}/${items.length}`;
    barEl.style.width = `${Math.round((ok/items.length)*100)}%`;
  }
  startBtn.disabled = false;
  statusEl.textContent = `ì¤€ë¹„ ì™„ë£Œ (${ok}/${items.length})`;
  diagBody.innerHTML = miss.length
    ? (`<b style="color:#ef4444">ëª» ì°¾ì€ íŒŒì¼: ${miss.length}</b><ul>` + miss.map(n=>`<li>${n} â†’ images/<b>${n}</b>.[png/jpg/webp/svg...]</li>`).join('') + '</ul>')
    : 'ëª¨ë“  ì´ë¯¸ì§€ ì°¾ìŒ';
  showItem(items[0], false); // ì²« ë¯¸ë¦¬ë³´ê¸°
}

/* === í‘œì‹œ/ìŠ¤í•€ === */
function showItem(item, fast=false){
  slot.classList.toggle('fast', fast);
  const cached = srcCache.get(item.base);
  if (cached){ slot.innerHTML = `<img class="logo" alt="${item.name}" src="${cached}">`; }
  else { slot.replaceChildren(fallbackBlock(item.name)); }
}
function startSpin(){
  if (intervalId) return;
  result.innerHTML = '';
  slot.classList.add('fast');
  intervalId = setInterval(()=>{
    idx = (idx + 1) % items.length;
    showItem(items[idx], true);
  }, 50);
  stopTimer = setTimeout(stopSpin, 2200);
}
function stopSpin(){
  clearInterval(intervalId); intervalId=null; slot.classList.remove('fast');
  const chosen = items[idx>=0?idx:0];
  showItem(chosen, false);
  result.innerHTML = `
    <div class="name">${chosen.name}</div>
    <div class="msg">ì¶•í•˜í•©ë‹ˆë‹¤. ë‹¹ì‹ ì€ "<b>${chosen.name}</b>" Yapperë¡œ ì„ ì •ë˜ì…¨ìŠµë‹ˆë‹¤.</div>
  `;
  startBtn.disabled = false;
}
startBtn.addEventListener('click', ()=>{ startBtn.disabled = true; startSpin(); });

preloadAll(); // ì‹œì‘!
</script>
</body>
</html>
